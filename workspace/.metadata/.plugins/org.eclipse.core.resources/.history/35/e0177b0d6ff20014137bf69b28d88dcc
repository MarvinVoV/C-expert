/*
 * simpleclient.c
 *
 *  Created on: May 4, 2015
 *      Author: yamorn
 */

#include "gen.h"

int main(int argc, char **argv){
	int listenfd;
	struct sockaddr_in servaddr;
	int ret;

	if(argc!=2){
		fprintf(stderr,"usage:%s <ip address>\n",argv[0]);
		exit(EXIT_FAILURE);
	}

	listenfd = socket(AF_INET,SOCK_STREAM,0);

	bzero(&servaddr,sizeof(servaddr));
	servaddr.sin_family=AF_INET;
	servaddr.sin_port=htons(SERV_PORT);
	inet_pton(AF_INET,argv[1],&servaddr.sin_addr);

	ret=connect(listenfd,(struct sockaddr *)&servaddr,sizeof(servaddr));
	if(ret==-1){
		perror("connect error");
		exit(EXIT_FAILURE);
	}

	process(stdin,listenfd);

	exit(EXIT_SUCCESS);
}

